# üß† Gazprombank Virtual Assistant

–í–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –Ω–∞ Django —Å –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–π –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π —á–µ—Ä–µ–∑ ASGI, –ø–æ–∑–≤–æ–ª—è—é—â–µ–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º:

* –æ–±—â–∞—Ç—å—Å—è —Å –≤–∏—Ä—Ç—É–∞–ª—å–Ω—ã–º –ø–æ–º–æ—â–Ω–∏–∫–æ–º
* –∑–∞–≥—Ä—É–∂–∞—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç—ã (PDF, DOCX, TXT)

---

## üöÄ –ë—ã—Å—Ç—Ä—ã–π –∑–∞–ø—É—Å–∫

### üîß –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

```bash
python3 -m venv venv
source venv/bin/activate
pip install -r requirements.txt
```

### ‚öôÔ∏è –ó–∞–ø—É—Å–∫ –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ —Å–µ—Ä–≤–µ—Ä–∞

```bash
python manage.py migrate
python manage.py runserver
```

### üö¶ –ü—Ä–æ–¥–∞–∫—à–Ω-—Å–µ—Ä–≤–µ—Ä —á–µ—Ä–µ–∑ Gunicorn + Uvicorn

```bash
gunicorn chatbotgpb.asgi:application -k uvicorn.workers.UvicornWorker -b 127.0.0.1:8000
```

---

## üóÇ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

* `chatbotgpb/` ‚Äî –æ—Å–Ω–æ–≤–Ω–æ–π Django-–ø—Ä–æ–µ–∫—Ç.
* `chat/` ‚Äî –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Å –ª–æ–≥–∏–∫–æ–π —á–∞—Ç–∞ –∏ –∑–∞–≥—Ä—É–∑–∫–∏ —Ñ–∞–π–ª–æ–≤.
* `templates/`:

    * `index.html` ‚Äî —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–≥–æ –ø–æ–º–æ—â–Ω–∏–∫–∞.
    * `upload.html` ‚Äî –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –∑–∞–≥—Ä—É–∑–∫–∏ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤.
* `static/` ‚Äî —Å—Ç–∏–ª–∏ –∏ —Å–∫—Ä–∏–ø—Ç—ã.
* `emb_server.py`, `parsing.py`, `search.py` ‚Äî backend-–æ–±—Ä–∞–±–æ—Ç–∫–∞ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ –∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏—è —ç–º–±–µ–¥–¥–∏–Ω–≥–æ–≤.
* `views.py` ‚Äî API –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ —Ñ–∞–π–ª–æ–≤ –∏ —á–∞—Ç–∞.
* `wait_user_query.py` ‚Äî —É—Ç–∏–ª–∏—Ç–∞ –¥–ª—è –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–π –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –æ—Ç–≤–µ—Ç–æ–≤ –∏–ª–∏ –æ–∂–∏–¥–∞–Ω–∏—è –≤–≤–æ–¥–∞.

---

## üìÅ –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å

* **–ß–∞—Ç-–±–æ—Ç** —Å –ø–æ–¥—Å–∫–∞–∑–∫–∞–º–∏ –∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏–µ–π NDJSON-–æ—Ç–≤–µ—Ç–æ–≤.
* **–ó–∞–≥—Ä—É–∑–∫–∞ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤** —Å UI drag-and-drop.
* –û–±—Ä–∞–±–æ—Ç–∫–∞ PDF/DOCX/TXT –∏ –æ—Ç–ø—Ä–∞–≤–∫–∞ –≤ `emb_server` –¥–ª—è –ø–∞—Ä—Å–∏–Ω–≥–∞.
* –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –Ω–∞ –∫–ª–∏–µ–Ω—Ç–µ.

---

## üìå –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

–û—Å–Ω–æ–≤–Ω—ã–µ:

* `Django`
* `gunicorn`
* `uvicorn`
* `docx`, `PyPDF2` (–¥–ª—è –ø–∞—Ä—Å–∏–Ω–≥–∞ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤)
* `requests`, `uuid`, `aiofiles` (–µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –≤ async-–ø–æ—Ç–æ–∫–∞—Ö)

---

## üåê URL-–∞–¥—Ä–µ—Å–∞

| URL               | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ                   |
|-------------------|------------------------------|
| `/`               | –í–∏—Ä—Ç—É–∞–ª—å–Ω—ã–π –ø–æ–º–æ—â–Ω–∏–∫         |
| `/upload/`        | –ó–∞–≥—Ä—É–∑–∫–∞ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤          |
| `/upload/submit/` | –û–±—Ä–∞–±–æ—Ç–∫–∞ —Ñ–æ—Ä–º—ã –∑–∞–≥—Ä—É–∑–∫–∏     |
| `/api/chat/`      | –≠–Ω–¥–ø–æ–∏–Ω—Ç –¥–ª—è –æ–±—â–µ–Ω–∏—è —Å –±–æ—Ç–æ–º |

---

## üõ° –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

* CSRF-—Ç–æ–∫–µ–Ω –¥–æ–±–∞–≤–ª–µ–Ω –≤ —à–∞–±–ª–æ–Ω—ã –∏ JavaScript.
* –í–∞–ª–∏–¥–∞—Ü–∏—è —Ç–∏–ø–∞ –∏ —Ä–∞–∑–º–µ—Ä–∞ —Ñ–∞–π–ª–æ–≤ (–¥–æ 100MB).
* –ó–∞—â–∏—Ç–∞ –æ—Ç XSS —á–µ—Ä–µ–∑ —ç–∫—Ä–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏–π –∏ markdown.
